<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    
        <title>README – swaggerdoc v0.0.1</title>
      
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc">

    <link rel="stylesheet" href="dist/app.css">
  </head>
  <body>

<div class="row row-offcanvas row-offcanvas-left">
<section id="sidebar" class="col-xs-6 col-sm-3 sidebar-offcanvas">
  <p class="pull-right visible-xs">
  <button type="button" class="btn btn-default btn-sm" data-toggle="offcanvas">
    <span class="glyphicon glyphicon-search"></span>
  </button>
  </p>

  <h1 id="full_list_header">
    
      <a href="https://github.com/OpenAperture/swaggerdoc">swaggerdoc v0.0.1</a>
    
  </h1>

  <h2 id="sub_list_header">
    
      <a href="README.html">README</a>
    
    <a href="overview.html">Overview</a>
  </h2>

  <div class="nav">
    
      <span><a id="modules_list" href="#full_list">Modules</a></span>
    
    
      <span role="presentation" class="disabled">Exceptions</span>
    
    
      <span role="presentation" class="disabled">Protocols</span>
    
  </div>

  <div id="search">
    <div class="col-xs-10">
      <div class="input-group input-group-sm">
        <label for="search_field" class="sr-only">Search</label>
        <input type="text" id="search_field" class="form-control" placeholder="Search" autocomplete="off" autofocus="autofocus" results="0">
        <span class="input-group-btn">
          <button class="btn btn-default" type="button"><span class="glyphicon glyphicon-search"></span></button>
        </span>
      </div><!-- /input-group -->
    </div><!-- /.col-xs-10 -->
    <div class="col-xs-2" id="spinning">
      <span></span>
    </div><!-- /.col-xs-2 -->
  </div><!-- /#search .row -->

  <script src="dist/sidebar_items.js" defer></script>

  <ul id="full_list">
  </ul>

  <div id="no_results"></div>
</section><!--/.sidebar-offcanvas -->
<section id="content" class="col-xs-12 col-sm-9">


<div class="breadcrumbs">
  <button type="button" class="btn btn-default btn-sm" data-toggle="offcanvas">
    <span class="glyphicon glyphicon-menu-hamburger"></span>
  </button>
  swaggerdoc v0.0.1 &rarr; <a href="README.html#content">README</a>
</div>

<h1>SwaggerDoc</h1>
<p>The SwaggerDoc module provides a convenience task for generating <a href="http://swagger.io/">Swagger</a> API documentation for Phoenix and Ecto-based projects.  This task has been created for Phoenix and Ecto 1.0 and greater.</p>
<h2>Getting Started</h2>
<p>To use swaggerdoc with your projects, edit your mix.exs file and add it as a dependency:</p>
<pre><code class="elixir">defp deps do
  [{:swaggerdoc, &quot;~&gt; 0.0.1&quot;}]
end</code></pre>
<p>To execute the Mix task, simply type <code class="inline">mix swagger</code>:</p>
<pre><code class="elixir">hello_user$ mix swagger
Generating Swagger documentation...
Adding Ecto definitions...
Adding Phoenix Routes...
Writing JSON to file...
Finished generating Swagger documentation!</code></pre>
<p>To view the generated Swagger in <a href="https://github.com/swagger-api/swagger-ui">swagger-ui</a>:</p>
<ul>
<li>In a temp folder, execute a git clone of <a href="https://github.com/swagger-api/swagger-ui.git">https://github.com/swagger-api/swagger-ui.git</a>
</li>
<li>In the browser of your choice, open the file <em>temp folder</em>/swagger-ui/dist/index.html
</li>
<li>In the JSON API input box at the top of the page, paste in the link to the JSON
</li>
<li>Hit the ‘Explore’ button
</li>
</ul>
<p>For a complete example, please see the <a href="https://github.com/OpenAperture/swaggerdoc/tree/master/examples">examples</a> section.</p>
<h2>Config</h2>
<p>SwaggerDoc’s version and project information is configured in your config.exs files.  The options are specified under the :swaggerdoc application.</p>
<pre><code class="iex">config :swaggerdoc,
  swagger_version: &quot;2.0&quot;</code></pre>
<h3>Task Config</h3>
<p>The following task-specific options are available:</p>
<ul>
<li>:output_path
</li>
<li>Description:  Specifies the file path where the JSON file will be created.
</li>
<li>Type:  string
</li>
<li>Default Value:  System.cwd!() &lt;&gt; “/swagger”
</li>
<li>:output_file
</li>
<li>Description:  Specifies the file name (within the output_path) of the Swagger JSON
</li>
<li>Type:  string
</li>
<li>Default Value:  “api.json”
</li>
</ul>
<h3>Swagger Config</h3>
<p>The following Swagger-specific options are available:</p>
<ul>
<li>:swagger_version
</li>
<li>Description:  Specifies the Swagger Specification version being used. It can be used by the Swagger UI and other clients to interpret the API listing. The value MUST be “2.0”.
</li>
<li>Swagger Location:  <a href="http://swagger.io/specification/#swaggerObject">Swagger Object</a>, “swagger”
</li>
<li>Type:  string
</li>
<li>Default Value:  “2.0”
</li>
<li>:host
</li>
<li>Description:  The host (name or ip) serving the API. This MUST be the host only and does not include the scheme nor sub-paths. It MAY include a port. If the host is not included, the host serving the documentation is to be used (including the port). The host does not support path templating.
</li>
<li>Swagger Location:  <a href="http://swagger.io/specification/#swaggerObject">Swagger Object</a>, “host”
</li>
<li>Type:  string
</li>
<li>Default Value:  “”  
</li>
<li>:base_path
</li>
<li>Description:  The base path on which the API is served, which is relative to the host. If it is not included, the API is served directly under the host. The value MUST start with a leading slash (/). The basePath does not support path templating.
</li>
<li>Swagger Location:  <a href="http://swagger.io/specification/#swaggerObject">Swagger Object</a>, “basePath”
</li>
<li>Type:  string
</li>
<li>Default Value:  “”    
</li>
<li>:schemes
</li>
<li>Description:  The transfer protocol of the API. Values MUST be from the list: “http”, “https”, “ws”, “wss”. If the schemes is not included, the default scheme to be used is the one used to access the Swagger definition itself.
</li>
<li>Swagger Location:  <a href="http://swagger.io/specification/#swaggerObject">Swagger Object</a>, “schemes”
</li>
<li>Type:  [string]
</li>
<li>Default Value:  ["http"]
</li>
<li>:consumes
</li>
<li>Description:  A list of MIME types the APIs can consume. This is global to all APIs but can be overridden on specific API calls. Value MUST be as described under Mime Types.
</li>
<li>Swagger Location:  <a href="http://swagger.io/specification/#swaggerObject">Swagger Object</a>, “consumes”  
</li>
<li>Type:  [string]
</li>
<li>Default Value:  []
</li>
<li>:produces
</li>
<li>Description:  A list of MIME types the APIs can produce. This is global to all APIs but can be overridden on specific API calls. Value MUST be as described under Mime Types.
</li>
<li>Swagger Location:  <a href="http://swagger.io/specification/#swaggerObject">Swagger Object</a>, “produces”  
</li>
<li>Type:  [string]
</li>
<li>Default Value:  []  
</li>
<li>:project_version
</li>
<li>Description:  Provides the version of the application API (not to be confused with the specification version).
</li>
<li>Swagger Location:  <a href="http://swagger.io/specification/#infoObject">Info Object</a>, “version”
</li>
<li>Type:  string
</li>
<li>Default Value:  “”
</li>
<li>:project_name
</li>
<li>Description:  The title of the application.
</li>
<li>Swagger Location:  <a href="http://swagger.io/specification/#infoObject">Info Object</a>, “title”
</li>
<li>Type:  string
</li>
<li>Default Value:  “”
</li>
<li>:project_desc
</li>
<li>Description:  A short description of the application. GFM syntax can be used for rich text representation.
</li>
<li>Swagger Location:  <a href="http://swagger.io/specification/#infoObject">Info Object</a>, “description”
</li>
<li>Type:  string
</li>
<li>Default Value:  “”
</li>
<li>:project_terms
</li>
<li>Description:  The Terms of Service for the API.
</li>
<li>Swagger Location:  <a href="http://swagger.io/specification/#infoObject">Info Object</a>, “termsOfService”
</li>
<li>Type:  string
</li>
<li>Default Value:  “”
</li>
<li>:project_contact_name
</li>
<li>Description:  The identifying name of the contact person/organization.
</li>
<li>Swagger Location:  <a href="http://swagger.io/specification/#contactObject">Contact Object</a>, “name”
</li>
<li>Type:  string
</li>
<li>Default Value:  “”
</li>
<li>:project_contact_email
</li>
<li>Description:  The email address of the contact person/organization. MUST be in the format of an email address.
</li>
<li>Swagger Location:  <a href="http://swagger.io/specification/#contactObject">Contact Object</a>, “email”
</li>
<li>Type:  string
</li>
<li>Default Value:  “”
</li>
<li>:project_contact_url
</li>
<li>Description:  The URL pointing to the contact information. MUST be in the format of a URL.
</li>
<li>Swagger Location:  <a href="http://swagger.io/specification/#contactObject">Contact Object</a>, “url”
</li>
<li>Type:  string
</li>
<li>Default Value:  “”
</li>
<li>:project_license_name
</li>
<li>Description:  The license name used for the API.
</li>
<li>Swagger Location:  <a href="http://swagger.io/specification/#licenseObject">License Object</a>, “url”
</li>
<li>Type:  string
</li>
<li>Default Value:  “”
</li>
<li>:project_license_url
</li>
<li>Description:  A URL to the license used for the API. MUST be in the format of a URL.
</li>
<li>Swagger Location:  <a href="http://swagger.io/specification/#licenseObject">License Object</a>, “url”
</li>
<li>Type:  string
</li>
<li>Default Value:  “”
</li>
</ul>
<p>Here’s an example from the sample <a href="https://github.com/OpenAperture/swaggerdoc/blob/master/examples/hello_user/config/config.exs">HelloUser’s config.exs</a>:</p>
<pre><code class="iex">config :swaggerdoc,
  swagger_version: &quot;2.0&quot;,
  project_version: &quot;1.0.0&quot;,
  project_name: &quot;Hello User&quot;,
  project_desc: &quot;The REST API for the Hello User&quot;,
  project_terms: &quot;https://www.mozilla.org/en-US/MPL/2.0/&quot;,
  project_contact_name: &quot;OpenAperture&quot;,
  project_contact_email: &quot;openaperture@lexmark.com&quot;,
  project_contact_url: &quot;http://openaperture.io&quot;,
  project_license_name: &quot;Mozilla Public License, v. 2.0&quot;,
  project_license_url: &quot;https://www.mozilla.org/en-US/MPL/2.0/&quot;,
  host: &quot;openaperture.io&quot;,
  base_path: &quot;/&quot;,
  schemes: [&quot;https&quot;],
  consumes: [&quot;application/json&quot;],
  produces: [&quot;application/json&quot;]</code></pre>
<h2>Default Behavior</h2>
<p>The mix task is designed to scan for Ecto-specific Models and Phoenix-specific routes to attempt to generate an accurrate Swagger API object.  </p>
<h3>Converting Ecto Models into Swagger Definitions</h3>
<p>Each <a href="https://github.com/elixir-lang/ecto/blob/v1.0.0/lib/ecto/model.ex">Ecto Model</a> that is identified (prescence of the <a href="https://github.com/elixir-lang/ecto/blob/v1.0.0/lib/ecto/schema.ex#L229-L230"><strong>schema</strong> method</a>) is converted into a <a href="http://swagger.io/specification/#definitionsObject">Definitions Object</a>.  </p>
<p>The conversion uses schema fields and updates them into schemas unde the <a href="http://swagger.io/specification/#definitionsObject">Definitions Object</a>.  The following values are used to convert an <a href="https://github.com/elixir-lang/ecto/blob/v1.0.0/lib/ecto/schema.ex#L107-L145">Ecto schema type</a> into a <a href="http://swagger.io/specification/#dataTypeType">Swagger property type</a>:</p>
<ul>
<li>:id -&gt; %{“type” =&gt; “integer”, “format” =&gt; “int64”}
</li>
<li>:binary_id -&gt; %{“type” =&gt; “string”, “format” =&gt; “binary”}
</li>
<li>:integer -&gt; %{“type” =&gt; “integer”, “format” =&gt; “int64”}
</li>
<li>:float -&gt; %{“type” =&gt; “number”, “format” =&gt; “float”}
</li>
<li>:boolean -&gt; %{“type” =&gt; “boolean”}
</li>
<li>:string -&gt; %{“type” =&gt; “string”}
</li>
<li>:binary -&gt; %{“type” =&gt; “string”, “format” =&gt; “binary”}
</li>
<li>:Ecto.DateTime -&gt; %{“type” =&gt; “string”, “format” =&gt; “date-time”}
</li>
<li>:Ecto.Date -&gt; %{“type” =&gt; “string”, “format” =&gt; “date”}
</li>
<li>:Ecto.Time -&gt; %{“type” =&gt; “string”, “format” =&gt; “date-time”}
</li>
<li>:uuid -&gt; %{“type” =&gt; “string”}
</li>
<li>_ -&gt; %{“type” =&gt; “string”}
</li>
</ul>
<p>Looking at the <a href="https://github.com/OpenAperture/swaggerdoc/blob/master/examples/hello_user/web/models/user.ex#L4-L11">HelloUser.User model</a>:</p>
<pre><code class="elixir">schema &quot;users&quot; do
    field :name, :string
    field :email, :string
    field :bio, :string
    field :number_of_pets, :integer

    timestamps
  end</code></pre>
<p>The JSON output will look like:</p>
<pre><code class="javascript">&quot;definitions&quot;: {
      &quot;HelloUser.User&quot;: {
        &quot;properties&quot;: {
          &quot;updated_at&quot;: {
            &quot;type&quot;: &quot;string&quot;,
            &quot;format&quot;: &quot;date-time&quot;
          },
          &quot;number_of_pets&quot;: {
            &quot;type&quot;: &quot;integer&quot;,
            &quot;format&quot;: &quot;int64&quot;
          },
          &quot;name&quot;: {
            &quot;type&quot;: &quot;string&quot;
          },
          &quot;inserted_at&quot;: {
            &quot;type&quot;: &quot;string&quot;,
            &quot;format&quot;: &quot;date-time&quot;
          },
          &quot;id&quot;: {
            &quot;type&quot;: &quot;integer&quot;,
            &quot;format&quot;: &quot;int64&quot;
          },
          &quot;email&quot;: {
            &quot;type&quot;: &quot;string&quot;
          },
          &quot;bio&quot;: {
            &quot;type&quot;: &quot;string&quot;
          }
        }
      }
    }</code></pre>
<h3>Converting Phoenix Routes into Swagger Paths</h3>
<p>The <a href="https://github.com/phoenixframework/phoenix/blob/v1.0.0/lib/phoenix/router/route.ex">Phoenix Routes</a> that is found via the <a href="https://github.com/phoenixframework/phoenix/blob/v1.0.0/lib/phoenix/router.ex">Phoenix Router</a> are converted into a <a href="http://swagger.io/specification/#pathsObject">Swagger Paths Object</a>, each route becoming a <a href="http://swagger.io/specification/#pathItemObject">Path Item</a>.  The Phoenix template paths are converted into <a href="http://swagger.io/specification/#pathTemplating">Swagger path templates</a> and each templated variable is converted into a <a href="http://swagger.io/specification/#parametersDefinitionsObject">Path paramter</a>.  All path parameters are assumed to be required and are of type string (except for parameters named <code class="inline">id</code>, which are assumed to be integers).</p>
<p><a href="http://swagger.io/specification/#responsesDefinitionsObject">Response Definitions</a> are generated, based on the HTTP verb associated with the operation:</p>
<ul>
<li>All Verbs
</li>
<li>“404” =&gt; %{“description” =&gt; “Resource not found”}, 
</li>
<li>“401” =&gt; %{“description” =&gt; “Request is not authorized”}, 
</li>
<li>“500” =&gt; %{“description” =&gt; “Internal Server Error”}
</li>
<li>GET
</li>
<li>“200” =&gt; %{“description” =&gt; “Resource Content”}
</li>
<li>DELETE
</li>
<li>“204” =&gt; %{“description” =&gt; “No Content”}
</li>
<li>POST
</li>
<li>“201” =&gt; %{“description” =&gt; “Resource created”
</li>
<li>“400” =&gt; %{“description” =&gt; “Request contains bad values”}
</li>
<li>PUT
</li>
<li>“204” =&gt; %{“description” =&gt; “No Content”
</li>
<li>“400” =&gt; %{“description” =&gt; “Request contains bad values”}
</li>
</ul>
<h2>Customized Behavior</h2>
<p>The default behavior of the task may be improved by adding action-specific functions that provide the task more detail.  As the task scans for <a href="https://github.com/phoenixframework/phoenix/blob/v1.0.0/lib/phoenix/router/route.ex">Phoenix Routes</a>, it will check for the prescense of a function named “swaggerdoc_#{route.controller.method}”.  If that function is present, the Map returned will be used in place of the default Swagger implementation.  The map may consist of the following elements:</p>
<ul>
<li>:description
</li>
<li>Short description of the API endpoint.
</li>
<li>:response_schema
</li>
<li>For API endpoints that are returning a value (i.e. a GET), you may want to return a specific <a href="http://swagger.io/specification/#schemaObject">Schema Object</a> that represents the return value.
</li>
<li>To specify a specific Ecto Model, add as a <a href="https://github.com/OpenAperture/swaggerdoc/blob/master/examples/hello_user/web/controllers/user_controller.ex#L41">$ref</a>:  <code class="inline">&quot;schema&quot;: %{&quot;$ref&quot;: &quot;#/definitions/HelloUser.User&quot;}</code>.  Make sure to use the fully-qualified module name.
</li>
<li>To specify an array of Ecto Models, add as an <a href="https://github.com/OpenAperture/swaggerdoc/blob/master/examples/hello_user/web/controllers/user_controller.ex#L10">array of items</a>:  <code class="inline">%{&quot;title&quot; =&gt; &quot;Users&quot;, &quot;type&quot;: &quot;array&quot;, &quot;items&quot;: %{&quot;$ref&quot;: &quot;#/definitions/HelloUser.User&quot;}}</code>
</li>
<li>To specify a custom object that doesn’t have a corresponding model, <a href="https://github.com/OpenAperture/swaggerdoc/blob/master/examples/hello_user/web/controllers/user_controller.ex#L149-L158">build the schema</a> directly:  
</li>
</ul>
<pre><code class="elixir">%{
        &quot;title&quot; =&gt; &quot;User.CustomFields&quot;, &quot;type&quot;: &quot;array&quot;, &quot;items&quot;: %{
          &quot;title&quot; =&gt; &quot;User.CustomField&quot;, 
          &quot;description&quot; =&gt; &quot;A Custom Field&quot;,
          &quot;type&quot; =&gt; &quot;object&quot;,
          &quot;required&quot; =&gt; [&quot;key&quot;,&quot;value&quot;],
          &quot;properties&quot; =&gt; %{
            &quot;key&quot; =&gt; %{&quot;type&quot; =&gt; &quot;string&quot;, &quot;description&quot; =&gt; &quot;The key for the custom field&quot;},
            &quot;value&quot; =&gt; %{&quot;type&quot; =&gt; &quot;string&quot;, &quot;description&quot; =&gt; &quot;The value for the custom field&quot;},
          }
      }
    }</code></pre>
<ul>
<li>:parameters
</li>
<li>An array of <a href="http://swagger.io/specification/#parametersDefinitionsObject">Parameter Definition objects</a>.  These values may represent a combination of query, body, formdata, etc…  For an example, please see the <a href="https://github.com/OpenAperture/swaggerdoc/blob/master/examples/hello_user/web/controllers/user_controller.ex#L109-L140">sync_user</a>:
</li>
</ul>
<pre><code class="elixir">[%{
      &quot;name&quot; =&gt; &quot;id&quot;,
      &quot;in&quot; =&gt; &quot;path&quot;,
      &quot;description&quot; =&gt; &quot;Workflow identifier&quot;,
      &quot;required&quot; =&gt; true,
      &quot;type&quot; =&gt; &quot;integer&quot;
    },
    %{
      &quot;name&quot; =&gt; &quot;force_sync&quot;,
      &quot;in&quot; =&gt; &quot;body&quot;,
      &quot;description&quot; =&gt; &quot;Force a synchronization of the user&quot;,
      &quot;required&quot; =&gt; false,
      &quot;schema&quot;: %{
        &quot;title&quot; =&gt; &quot;force_sync&quot;, 
        &quot;description&quot; =&gt; &quot;Force a synchronization of the user&quot;,
        &quot;type&quot; =&gt; &quot;boolean&quot;
      }
    },
    %{
      &quot;name&quot; =&gt; &quot;foreign_system_id&quot;,
      &quot;in&quot; =&gt; &quot;body&quot;,
      &quot;description&quot; =&gt; &quot;Foreign User system identifier&quot;,
      &quot;required&quot; =&gt; true,
      &quot;schema&quot;: %{
        &quot;title&quot; =&gt; &quot;foreign_system_id&quot;, 
        &quot;description&quot; =&gt; &quot;Foreign User system identifier&quot;,
        &quot;type&quot; =&gt; &quot;string&quot;
      }      
    }]</code></pre>
<ul>
<li>Note that <code class="inline">body</code> parameters are required to define a <code class="inline">schema</code>.
</li>
</ul>

  </section> <!--/content -->
</div><!--/row -->

    <script src="dist/app.js"></script>
  </body>
</html>

